# 🧪 v1.1.1 快速测试指南

## 准备工作

1. **重新加载扩展**
   - 访问 `chrome://extensions/`
   - 找到 "Douyin Bulk Manager"
   - 点击"重新加载"图标 🔄
   - 确认版本号显示为 **1.1.1**

2. **刷新抖音创作者页面**
   - 访问 https://creator.douyin.com/creator-micro/content/manage
   - 按 F5 刷新页面
   - 等待页面加载完成

---

## 测试新功能

### ✅ 测试 1：可视化下载队列

**操作步骤**：
1. 勾选 3-5 个视频
2. 点击"📥 批量下载"按钮
3. 在确认对话框中点击"确定"

**预期结果**：
- ✅ 页面右上角出现蓝色进度窗口
- ✅ 窗口标题显示 "📥 批量下载进度"
- ✅ 显示进度计数（如 "1/5"）
- ✅ 每个视频显示为一行，带状态图标：
  - ⏳ 等待中（灰色）
  - ⬇️ 下载中（蓝色）
  - ✅ 成功（绿色）
  - ❌ 失败（红色）
- ✅ 窗口自动滚动显示最新项
- ✅ 全部完成后显示 🎉 图标
- ✅ 3 秒后窗口自动关闭

**截图位置**：
```
┌─────────────────────────────┐
│ 📥 批量下载进度    3/5      │  ← 蓝色渐变标题栏
├─────────────────────────────┤
│ ✅ 视频标题1.mp4            │  ← 绿色（成功）
│ ✅ 视频标题2.mp4            │  ← 绿色（成功）
│ ⬇️ 视频标题3.mp4            │  ← 蓝色（下载中）
│ ⏳ 视频标题4.mp4            │  ← 灰色（等待）
│ ⏳ 视频标题5.mp4            │  ← 灰色（等待）
└─────────────────────────────┘
          ↑
    固定在右上角
```

---

### ✅ 测试 2：随机下载间隔

**操作步骤**：
1. 打开开发者工具（F12）
2. 切换到 Console 标签页
3. 勾选 5 个视频并点击下载

**预期结果**：
- ✅ 控制台输出类似：
  ```
  ⏳ 等待 2.3 秒后继续...
  ⏳ 等待 3.8 秒后继续...
  ⏳ 等待 2.1 秒后继续...
  ⏳ 等待 3.5 秒后继续...
  ```
- ✅ 每次等待时间在 2.0-4.0 秒之间
- ✅ 等待时间不固定（随机）

---

### ✅ 测试 3：自动重试机制

**模拟 403 错误测试**（可选）：

如果遇到 403 错误，观察控制台日志：

**预期输出**：
```
❌ 下载失败: 视频标题.mp4 Error: HTTP 403
⚠️ 下载失败，4.2秒后重试 (1/2)...
📥 开始下载: 视频标题.mp4 URL: https://...
❌ 下载失败: 视频标题.mp4 Error: HTTP 403
⚠️ 下载失败，3.6秒后重试 (2/2)...
📥 开始下载: 视频标题.mp4 URL: https://...
❌ 重试 2 次后仍然失败: 视频标题.mp4
```

**验证点**：
- ✅ 自动重试 2 次
- ✅ 每次重试间隔 3-5 秒
- ✅ 进度 UI 显示为红色 ❌

---

### ✅ 测试 4：完成提示优化

**操作步骤**：
1. 完成一次批量下载（部分成功，部分失败）

**预期提示**：
```
✅ 下载完成！

成功: 8 个

❌ 失败: 4 个（可能触发限流，建议稍后重试）

请在浏览器下载管理器中查看文件。
```

**验证点**：
- ✅ 明确显示成功和失败数量
- ✅ 失败时提示可能是限流
- ✅ 建议稍后重试

---

## 性能测试

### 测试场景 1：小批量（5 个视频）

**预期**：
- 成功率：> 90%
- 总耗时：约 15-20 秒（5 × 3 秒平均间隔）
- 失败数：0-1 个

---

### 测试场景 2：中批量（10 个视频）

**预期**：
- 成功率：80-90%
- 总耗时：约 30-40 秒
- 失败数：1-2 个

---

### 测试场景 3：大批量（20 个视频）

**预期**：
- 成功率：60-80%
- 总耗时：约 60-80 秒
- 失败数：4-8 个
- ⚠️ 可能触发限流

**建议**：分两批下载，每批 10 个

---

## 已知问题和解决方案

### 问题 1：大量 403 错误（失败率 > 50%）

**原因**：触发平台限流

**解决方案**：
1. ⏸️ 停止当前下载
2. ⏱️ 等待 10-15 分钟
3. 🔄 刷新页面重新加载
4. 📉 减少下载数量（5-10 个）
5. 🔁 重新尝试

---

### 问题 2：进度窗口没有出现

**原因**：可能被其他元素遮挡

**解决方案**：
1. 检查页面右上角（向下滚动看看）
2. 按 F12 打开开发者工具，在 Elements 中搜索 `dy-download-progress`
3. 如果存在但不可见，检查 CSS

---

### 问题 3：重试后仍然失败

**原因**：
- 视频链接已过期
- 账号被临时限流

**解决方案**：
1. 刷新页面（重新获取视频链接）
2. 等待 30 分钟后再试
3. 更换时间段（避开高峰期）

---

## 对比测试（v1.1.0 vs v1.1.1）

| 指标 | v1.1.0 | v1.1.1 | 改进 |
|------|--------|--------|------|
| **下载间隔** | 固定 1 秒 | 随机 2-4 秒 | ✅ 更安全 |
| **重试机制** | ❌ 无 | ✅ 2 次 | ✅ 成功率提升 |
| **进度显示** | ❌ 无 | ✅ 实时 UI | ✅ 体验大幅提升 |
| **失败提示** | 简单统计 | 详细说明 | ✅ 更友好 |
| **成功率（12个）** | 67% (8/12) | 预计 75-85% | ✅ 提升 10-20% |

---

## 测试清单

- [ ] 进度窗口正常显示
- [ ] 进度计数实时更新
- [ ] 状态图标正确切换
- [ ] 下载间隔在 2-4 秒之间
- [ ] 403 错误自动重试
- [ ] 重试间隔在 3-5 秒之间
- [ ] 窗口自动滚动
- [ ] 完成后 3 秒自动关闭
- [ ] 完成提示包含详细信息
- [ ] 失败时提示限流建议

---

## 反馈

测试完成后，请反馈：

1. **成功率**：X/Y 个视频下载成功
2. **失败情况**：是否遇到 403 错误？重试是否生效？
3. **UI 体验**：进度窗口是否清晰易读？
4. **性能表现**：是否还有卡顿或限流？
5. **改进建议**：希望增加哪些功能？

🎉 祝测试顺利！
